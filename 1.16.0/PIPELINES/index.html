
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://docs.mettel-automation.net/1.16.0/PIPELINES/" rel="canonical"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.1, mkdocs-material-8.2.11" name="generator"/>
<title>Pipelines - Automation Engine Documentation</title>
<link href="../assets/stylesheets/main.8c5ef100.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.9647289d.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#pipelines">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-component="outdated" hidden="">
<aside class="md-banner md-banner--warning">
</aside>
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Automation Engine Documentation" class="md-header__button md-logo" data-md-component="logo" href=".." title="Automation Engine Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Automation Engine Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Pipelines
            
          </span>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Automation Engine Documentation" class="md-nav__button md-logo" data-md-component="logo" href=".." title="Automation Engine Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Automation Engine Documentation
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" id="__nav_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_1">
          Concepts
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Concepts" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../MONOREPO/">
        Monorepo
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          CI/CD Pipelines
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="CI/CD Pipelines" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          CI/CD Pipelines
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../pipeline/BASIC_CI_CONFIGURATION/">
        Pre-requisites
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../pipeline/PIPELINE_RULES/">
        Setting up pipelines
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          Documentation
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Documentation" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../DOCUMENTATION/">
        About this documentation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../decisions/">
        Architecture Decision Records (ADRs)
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3">
          Business
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Business" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
          Business
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../metrics-definitions/">
        Metrics Definitions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../parameters/parameters/">
        System Configuration
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3" id="__nav_3_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3">
          Workflows
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Workflows" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_3_3">
<span class="md-nav__icon md-icon"></span>
          Workflows
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/messages-bus/">
        Communication between services
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_2" id="__nav_3_3_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_2">
          Bridges
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Bridges" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_3_3_2">
<span class="md-nav__icon md-icon"></span>
          Bridges
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/bruin-bridge/">
        Bruin
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/digi-bridge/">
        DiGi
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/dri-bridge/">
        DRI (Data Remote Portal)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/email-bridge/">
        E-mail Services
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/hawkeye-bridge/">
        Hawkeye / Ixia
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/notifications-bridge/">
        Notification Services
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/servicenow-bridge/">
        ServiceNow
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/velocloud-bridge/">
        VeloCloud
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3" id="__nav_3_3_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3">
          Use cases
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Use cases" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_3_3_3">
<span class="md-nav__icon md-icon"></span>
          Use cases
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_1" id="__nav_3_3_3_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_1">
          Caching Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Caching Services" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_3_3_3_3_1">
<span class="md-nav__icon md-icon"></span>
          Caching Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/hawkeye-customer-cache/">
        Hawkeye / Ixia
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/customer-cache/">
        VeloCloud
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_2" id="__nav_3_3_3_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_2">
          DiGi
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="DiGi" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_3_3_3_3_2">
<span class="md-nav__icon md-icon"></span>
          DiGi
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_2_1" id="__nav_3_3_3_3_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_2_1">
          Reporting
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Reporting" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_3_3_3_3_2_1">
<span class="md-nav__icon md-icon"></span>
          Reporting
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/digi-reboot-report/">
        Reboot Report
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_3" id="__nav_3_3_3_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_3">
          Fraud
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Fraud" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_3_3_3_3_3">
<span class="md-nav__icon md-icon"></span>
          Fraud
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_3_1" id="__nav_3_3_3_3_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_3_1">
          Monitoring
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Monitoring" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_3_3_3_3_3_1">
<span class="md-nav__icon md-icon"></span>
          Monitoring
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/fraud-monitor/">
        Fraud Alerts
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_4" id="__nav_3_3_3_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_4">
          Hawkeye / Ixia
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Hawkeye / Ixia" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_3_3_3_3_4">
<span class="md-nav__icon md-icon"></span>
          Hawkeye / Ixia
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_4_1" id="__nav_3_3_3_3_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_4_1">
          Monitoring
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Monitoring" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_3_3_3_3_4_1">
<span class="md-nav__icon md-icon"></span>
          Monitoring
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/hawkeye-outage-monitor/">
        Service Outage
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_5" id="__nav_3_3_3_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_5">
          InterMapper
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="InterMapper" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_3_3_3_3_5">
<span class="md-nav__icon md-icon"></span>
          InterMapper
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_5_1" id="__nav_3_3_3_3_5_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_5_1">
          Monitoring
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Monitoring" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_3_3_3_3_5_1">
<span class="md-nav__icon md-icon"></span>
          Monitoring
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/intermapper-outage-monitor/">
        Service Outage
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_6" id="__nav_3_3_3_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_6">
          LuminAI
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="LuminAI" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_3_3_3_3_6">
<span class="md-nav__icon md-icon"></span>
          LuminAI
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_6_1" id="__nav_3_3_3_3_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_6_1">
          Reporting
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Reporting" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_3_3_3_3_6_1">
<span class="md-nav__icon md-icon"></span>
          Reporting
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/lumin-billing-report/">
        Billing Report
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/task-dispatcher/">
        Tasks scheduling
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_8" id="__nav_3_3_3_3_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_8">
          VeloCloud
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="VeloCloud" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_3_3_3_3_8">
<span class="md-nav__icon md-icon"></span>
          VeloCloud
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_8_1" id="__nav_3_3_3_3_8_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_8_1">
          Reporting
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Reporting" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_3_3_3_3_8_1">
<span class="md-nav__icon md-icon"></span>
          Reporting
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/last-contact-report/">
        Last Contact Report
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_8_2" id="__nav_3_3_3_3_8_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_8_2">
          Monitoring
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Monitoring" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_3_3_3_3_8_2">
<span class="md-nav__icon md-icon"></span>
          Monitoring
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3_3_8_2_1" id="__nav_3_3_3_3_8_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3_8_2_1">
          SD-WAN
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="SD-WAN" class="md-nav" data-md-level="7">
<label class="md-nav__title" for="__nav_3_3_3_3_8_2_1">
<span class="md-nav__icon md-icon"></span>
          SD-WAN
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/service-affecting-monitor/">
        Service Affecting
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/service-outage-monitor/">
        Service Outage
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging/events/gateway-monitor/">
        Gateways
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
          Working in local environments
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Working in local environments" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Working in local environments
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1">
          Automation
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Automation" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
          Automation
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_1" id="__nav_4_1_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1_1">
          Metrics
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Metrics" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_1">
<span class="md-nav__icon md-icon"></span>
          Metrics
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../CREATE_NEW_METRIC/">
        Creating new metrics
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1_2" id="__nav_4_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1_2">
          Business Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Business Services" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_1_2">
<span class="md-nav__icon md-icon"></span>
          Business Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../CREATE_NEW_MICROSERVICE/">
        Creating new services
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2">
          Data Lake
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Data Lake" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Data Lake
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../kafka/LAUNCH_DOCKER_COMPOSE/">
        Running in docker-compose
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
          System Overview
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="System Overview" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          System Overview
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" id="__nav_5_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_1">
          Automation Engine
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Automation Engine" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_1">
<span class="md-nav__icon md-icon"></span>
          Automation Engine
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../SYSTEM_OVERVIEW/">
        Architecture &amp; Infrastructure
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../INFRASTRUCTURE_AS_CODE/">
        Infrastructure as Code
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../LOGGING_AND_MONITORING/">
        Logging &amp; Monitoring
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Pipelines
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Pipelines
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#launch-all-jobs-in-a-pipeline">
    Launch all jobs in a pipeline
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#environments">
    Environments
  </a>
<nav aria-label="Environments" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#microservices-environments">
    Microservices Environments
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kre-environments">
    KRE Environments
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#continuous-integration-ci">
    Continuous integration (CI)
  </a>
<nav aria-label="Continuous integration (CI)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#validation-steps">
    Validation steps
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#unit-tests-steps">
    Unit tests steps
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#continuous-delivery-cd">
    Continuous delivery (CD)
  </a>
<nav aria-label="Continuous delivery (CD)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#basic_infra-steps">
    Basic_infra steps
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#basic_infra_kre-steps">
    Basic_infra_kre steps
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deploy_kre_runtimes-steps">
    Deploy_kre_runtimes steps
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#build-steps">
    Build steps
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deploy-steps">
    Deploy steps
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#destroy-steps">
    Destroy steps
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" id="__nav_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2">
          Data Lake
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Data Lake" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
          Data Lake
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../snowflake/">
        Snowflake
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6">
          Manual Procedures
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Manual Procedures" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Manual Procedures
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../manual_procedures/EMERGENCY_PLAN/">
        Emergency Recovery Plan
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../manual_procedures/API_VENDOR_ACCESS/">
        Grant vendors access to the Data Lake API
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../manual_procedures/SWITCH_AUTOMATION_ENGINE_REGION/">
        Switch Automation Engine's region
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7">
          Backups Recovery Plans
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Backups Recovery Plans" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Backups Recovery Plans
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" id="__nav_7_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_1">
          AWS
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="AWS" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_1">
<span class="md-nav__icon md-icon"></span>
          AWS
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../backups/ECR_RECOVERY_PLAN/">
        ECR
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../backups/EKS_SSH_RECOVERY_PLAN/">
        EKS SSH
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" id="__nav_7_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2">
          Infrastructure
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Infrastructure" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_2">
<span class="md-nav__icon md-icon"></span>
          Infrastructure
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../backups/TERRAFORM_RECOVERY_PLAN/">
        Terraform
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" id="__nav_7_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_3">
          Metrics
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Metrics" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_3">
<span class="md-nav__icon md-icon"></span>
          Metrics
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../backups/PROMETHEUS_RECOVERY_PLAN/">
        Prometheus
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_4" id="__nav_7_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_4">
          Source Code
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Source Code" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_4">
<span class="md-nav__icon md-icon"></span>
          Source Code
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../backups/GIT_RECOVERY_PLAN/">
        GIT repository
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_5" id="__nav_7_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_5">
          System Configuration
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="System Configuration" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_5">
<span class="md-nav__icon md-icon"></span>
          System Configuration
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../lambda/PARAMETER_REPLICATOR/">
        Parameters Replication
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8">
          Manual Configurations
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Manual Configurations" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
          Manual Configurations
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../manual_configurations/INIT_AUTOMATION_PROJECT/">
        Initialize Automation Engine project
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_2" id="__nav_8_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_2">
          AWS SSO - OKTA
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="AWS SSO - OKTA" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_2">
<span class="md-nav__icon md-icon"></span>
          AWS SSO - OKTA
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../manual_configurations/OKTA_CONFIGURATIONS/">
        Configurations
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../manual_configurations/OKTA_JWT/">
        JWT token
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<div align="center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="https://media.licdn.com/dms/image/C4E0BAQHrME9aCW6ulg/company-logo_200_200/0?e=2159024400&amp;v=beta&amp;t=6xMNS1zK1F8asBlM16EzbJ4Im7SlQ8L7a7sgcaNzZQE"><img height="200" src="https://media.licdn.com/dms/image/C4E0BAQHrME9aCW6ulg/company-logo_200_200/0?e=2159024400&amp;v=beta&amp;t=6xMNS1zK1F8asBlM16EzbJ4Im7SlQ8L7a7sgcaNzZQE" width="200"/></a>
</div>
<h1 id="pipelines">Pipelines</h1>
<p>In this project is implemented Software delivery with total automation, thus avoiding manual intervention and therefore human errors in our product.</p>
<p>Human error can and does occur when carrying out these boring and repetitive tasks manually and ultimately does affect the ability to meet deliverables.</p>
<p>All the automation is made with Gitlab CI technology, taking advantage of all the tools that Gitlab has.
We separate the automation in two parts, <a href="#continuous-integration-ci">continuous integration</a> and <a href="#continuous-delivery-cd">continuous delivery</a>, that are explained in the next sections.</p>
<p>To improve the speed and optimization of the pipelines, <strong>only the jobs and stages will be executed on those modules that change in each commit</strong>.</p>
<h2 id="launch-all-jobs-in-a-pipeline">Launch all jobs in a pipeline</h2>
<p><strong>Exceptionally, it is possible to launch a pipeline with all the jobs and stages on a branch using the web interface, as shown in the following image</strong>. To do so, the following steps must be followed:</p>
<ol>
<li>
<p>From the project repository select the <code>CI/CD</code> option in the left sidebar and this <code>Pipelines</code>, as shown in the following image where these options are marked in red.
   <a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/pipelines/Select_CI_option.png"><img alt="IMAGE: Select_CI_option" src="../img/pipelines/Select_CI_option.png"/></a></p>
</li>
<li>
<p>Choose the <code>Run Pipeline</code> option, as shown in the image below in red.
   <a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/pipelines/select_run_pipeline.png"><img alt="IMAGE: select_run_pipeline" src="../img/pipelines/select_run_pipeline.png"/></a></p>
</li>
<li>
<p>Indicate the branch where you want to run the pipeline in the <code>Run for</code> box and then click on <code>Run pipeline</code>. It's possible see an example in the following image, where the box <code>Run for</code> is shown in green and <code>Run pipeline</code> is shown in red.
   <a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/pipelines/select_run_pipeline_branch.png"><img alt="IMAGE: select_run_pipeline_branch" src="../img/pipelines/select_run_pipeline_branch.png"/></a></p>
</li>
</ol>
<blockquote>
<p>It is important to note that due to the extra time added by the tests of the <code>dispacth-portal-frontend</code> microservice, the tests of this one will only be executed when any of the files within it change or a pipeline with the Gitlab variable <code>TEST_DISPATCH_PORTAL_FRONTEND</code> with value <code>true</code> is executed.</p>
</blockquote>
<h2 id="environments">Environments</h2>
<h3 id="microservices-environments">Microservices Environments</h3>
<p>For the microservices there are the following environments</p>
<ul>
<li>
<p><strong>Production</strong>: The environment is related to everything currently running in AWS related to the latest version of the <code>master</code> branch of the repository.</p>
</li>
<li>
<p><strong>Ephemerals</strong>: These environments are created from branches that start with name <code>dev/feature</code> or <code>dev/fix</code>.</p>
</li>
</ul>
<blockquote>
<p>The name of any environment, regardless of the type, will identify all the resources created in the deployment process. The names for environments are <code>automation-master</code> for production, as well as <code>automation-&lt;branch_identifier&gt;</code> for ephemeral environments, being <code>branch_identifier</code> the result of applying <code>echo -n "&lt;branch_name&gt;" | sha256sum | cut -c1-8</code> on the branch name related to the ephemeral environment. These names will identify all the resources created in AWS during the <a href="#continuous-delivery-cd">continuous delivery</a> process, explained in the following sections.</p>
</blockquote>
<h3 id="kre-environments">KRE Environments</h3>
<p>For <a href="https://konstellation-io.github.io/website/">KRE</a> component there are the following environments: </p>
<ul>
<li>
<p><strong>dev</strong>: This will be used for the various tests and calls made from the project's microservices in any <strong>ephemeral environment</strong>, ie from the microservices deployed in the ECS cluster with name <code>automation-&lt;environment_id&gt;</code>.</p>
</li>
<li>
<p><strong>production</strong>: This will be used for the different calls made from the project's microservices in the <strong>production environment</strong>, that is, from the microservices deployed in the ECS cluster with the name <code>automation-master</code>.</p>
</li>
</ul>
<h2 id="continuous-integration-ci">Continuous integration (CI)</h2>
<blockquote>
<p>Continuous Integration (CI) is a development practice where developers integrate code into a shared repository frequently, preferably several times a day. Each integration can then be verified by an automated build and automated tests. While automated testing is not strictly part of CI it is typically implied.
<a href="https://codeship.com/continuous-integration-essentials">Codeship</a></p>
</blockquote>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/pipelines/CI_MetTel_Automation.png"><img alt="IMAGE: CI_MetTel_Automation.png" src="../img/pipelines/CI_MetTel_Automation.png"/></a></p>
<h3 id="validation-steps">Validation steps</h3>
<p>This stage checks the following:</p>
<ul>
<li>
<p>All python microservices comply with the rules of <a href="https://www.python.org/dev/peps/pep-0008/#package-and-module-names">PEP8</a></p>
</li>
<li>
<p>Terraform files used to configure the infrastructure are valid from a syntactic point of view.</p>
</li>
<li>
<p>The frontend modules comply with the linter configured for them</p>
</li>
</ul>
<h3 id="unit-tests-steps">Unit tests steps</h3>
<p>All the available unit tests for each service should be run in this stage of the CI process.</p>
<p>If the coverage obtained from these tests for a service is not greater than or equal to 80%, it will cause this phase to fail, this will mean that the steps of the next stage will not be executed and the process will fail.</p>
<p>In cases in which a module does not reach the minimum coverage mentioned above, a message like the following will be seen in the step executed for that module.</p>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/pipelines/unit_test_coverage_not_reach_minimum.png"><img alt="IMAGE: unit_test_coverage_not_reach_minimum.png" src="../img/pipelines/unit_test_coverage_not_reach_minimum.png"/></a></p>
<h2 id="continuous-delivery-cd">Continuous delivery (CD)</h2>
<blockquote>
<p>Continuous deployment is the next step of continuous delivery: Every change that passes the automated tests is deployed to production automatically. Continuous deployment should be the goal of most companies that are not constrained by regulatory or other requirements.
<a href="https://puppet.com/blog/continuous-delivery-vs-continuous-deployment-what-s-diff">Puppet.com</a></p>
</blockquote>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="../img/pipelines/CD_MetTel_Automation.png"><img alt="IMAGE: CD_MetTel_Automation.png" src="../img/pipelines/CD_MetTel_Automation.png"/></a></p>
<h3 id="basic_infra-steps">Basic_infra steps</h3>
<p>This area covers the checking and creation, if necessary, of all the basic resources for the subsequent deployment, these being the specific image repositories in <a href="https://aws.amazon.com/ecr">ECR Docker Container Registry</a>, as well as the roles necessary in AWS to be able to display these images in <a href="https://aws.amazon.com/ecs/">ECS Container Orchestrator</a>.</p>
<p>In this stage there is also a job that must be executed manually if necessary, this is responsible for checking and creating if necessary network resources for the production environment or ephemeral environments.</p>
<p>In this stage is also checked whether there are enough free resources in ECS to carry out the deployment with success or not.</p>
<p><strong>It's necessary run the <code>basic-infra</code> job the first time a new microservice is created in the project</strong></p>
<blockquote>
<p>This has been done because ECR repositories are global resources and are stored in the same <code>tfstate</code> file, thus avoiding that when a microservice that creates a repository is created, it is not deleted by other branches that do not have it added.</p>
</blockquote>
<h3 id="basic_infra_kre-steps">Basic_infra_kre steps</h3>
<p>In this stage will be the following jobs:
* <code>deploy-basic-infra-kre-dev</code> for ephemeral environments and <code>deploy-basic-infra-kre-production</code> for the production environment, <strong>these are executed optionally manually</strong>.</p>
<p>This job is responsible for checking and creation, if necessary, of the EKS cluster used by KRE in each environment and all the necessary resources related (RBAC configuration, helm charts needed for the KRE runtimes, etc)</p>
<p>The process followed in this job is as follows:</p>
<ol>
<li>
<p>The necessary infrastructure is created in AWS for KRE, creating for them the following components:</p>
<ul>
<li>
<p>An S3 bucket for each environment and save information about the cluster, such as the SSH key to connect to the nodes.</p>
</li>
<li>
<p>An <a href="https://docs.aws.amazon.com/eks/latest/userguide/clusters.html">EKS cluster</a> to be able to deploy the different KRE components designed for Kubernetes</p>
</li>
<li>
<p>An <a href="https://docs.aws.amazon.com/autoscaling/ec2/userguide/AutoScalingGroup.html">AutoScaling Group</a> to have the desired number of Kubernetes worker nodes</p>
</li>
<li>
<p>A SMTP service through <a href="https://aws.amazon.com/ses/">Amazon SES</a> and all the necessary components of it</p>
</li>
<li>
<p>A set of IAM roles, one for each user with access to the project. These will be used to assign subsequent permissions in the Kubernetes cluster according to the role they belong to. These are stored as terraform <a href="https://www.terraform.io/docs/configuration/outputs.html">output values</a>, saving the list of user roles belonging to each role in their corresponding variable.</p>
</li>
</ul>
<p>Below is an example of a pipeline execution where it's possible see the IAM roles of users generated for each role in the project:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>Outputs:
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a> <span class="nv">eks_developer_ops_privileged_roles</span> <span class="o">=</span> <span class="o">[</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>   <span class="s2">"arn:aws:iam::374050862540:role/eks-developer-ops-mettel-automation-kre-xisco.capllonch"</span>,
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>   <span class="s2">"arn:aws:iam::374050862540:role/eks-developer-ops-mettel-automation-kre-xoan.mallon.developer"</span>,
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a> <span class="o">]</span>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a> <span class="nv">eks_developer_roles</span> <span class="o">=</span> <span class="o">[</span>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>   <span class="s2">"arn:aws:iam::374050862540:role/eks-developer-mettel-automation-kre-brandon.samudio"</span>,
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>   <span class="s2">"arn:aws:iam::374050862540:role/eks-developer-mettel-automation-kre-daniel.fernandez"</span>,
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>   <span class="s2">"arn:aws:iam::374050862540:role/eks-developer-mettel-automation-kre-joseluis.vega"</span>,
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>   <span class="s2">"arn:aws:iam::374050862540:role/eks-developer-mettel-automation-kre-marc.vivancos"</span>,
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a> <span class="o">]</span>
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a> <span class="nv">eks_devops_roles</span> <span class="o">=</span> <span class="o">[</span>
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>   <span class="s2">"arn:aws:iam::374050862540:role/eks-devops-mettel-automation-kre-alberto.iglesias"</span>,
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a>   <span class="s2">"arn:aws:iam::374050862540:role/eks-devops-mettel-automation-kre-angel.costales"</span>,
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a>   <span class="s2">"arn:aws:iam::374050862540:role/eks-devops-mettel-automation-kre-angel.luis.piquero"</span>,
<a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a> <span class="o">]</span>
</code></pre></div>
<ul>
<li>
<p>A set of helm charts necessary for any KRE runtime:</p>
<ol>
<li>
<p><strong>external-dns</strong>, using the helm chart from <a href="https://charts.bitnami.com/bitnami">bitnami repository</a></p>
<p><code>external-dns</code> is a Kubernetes addon that configures public DNS servers with information about exposed Kubernetes services to make them discoverable. It allows in a simple way that through the creation of an ingress in AWS you can create an entry in Route53 of type alias so that the calls to that ingress redirect to the value configured for the alias, being the most typical the DNS of the balancer created by the ingress.</p>
</li>
<li>
<p><strong>cert-mananger</strong>, using the helm chart from <a href="https://charts.jetstack.io">jetstack repository</a>.</p>
<p>This component automates the management lifecycle of all required certificates used by the KRE component in each environment.</p>
</li>
<li>
<p><strong>nginx ingress controller</strong>, using the helm chart from <a href="https://kubernetes.github.io/ingress-nginx">ingress-nginx repository</a>.</p>
<p>A series of configurations are provided so that the IP of clients in Kubernetes services can be known, since by default it will always use the internal IP in EKS of the load balancer for requests made from the Internet.</p>
<p>A list of allowed IPs is also provided in the chart configuration through a specific configuration key, thus restricting access to the cluster's microservices.</p>
<p>This component will create a <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/introduction.html">Classic Load Balancer</a> in AWS to expose nginx ingress component.</p>
</li>
<li>
<p><strong>hostpath provisioner</strong>, using the helm chart from <a href="https://charts.rimusz.net">rimusz repository</a> </p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Using a <em>Python</em> <a href="../ci-utils/eks/iam-to-eks-roles/README.md">cli</a>, permissions are assigned in Kubernetes Cluster created for KRE for each of the IAM roles created in the previous step. </p>
</li>
</ol>
<h3 id="deploy_kre_runtimes-steps">Deploy_kre_runtimes steps</h3>
<p>In this stage the KRE runtimes will be deployed in the corresponding environment, creating the necessary infrastructure and resources:</p>
<ul>
<li>
<p>A Hosted Zone in Route53 for the runtime in the specified environment using the <code>mettel-automation.net</code> domain name</p>
</li>
<li>
<p>The kre helm chart with the necessary values for the environment creating a specific namespace in the EKS cluster for deploy the helm chart</p>
</li>
</ul>
<h3 id="build-steps">Build steps</h3>
<p>This area will cover all build steps of all necessary modules to deploy the app to the selected environment. It's typical to build the docker images and push to the repository in this step.</p>
<h3 id="deploy-steps">Deploy steps</h3>
<p>In this stage there are one job:</p>
<ul>
<li>
<p><code>deploy-branches</code> for ephemeral environments and <code>deploy-master</code> for the production environment, <strong>these are executed automatically</strong>. In which <em>MetTel Automation</em> modules in the monorepo will be deployed to the selected environment, as well as all the resources associated to that environment in AWS. The deploy steps will deploy the following in AWS:</p>
</li>
<li>
<p>An <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ECS_clusters.html">ECS Cluster</a> will be created for the environment with a set of resources</p>
<ul>
<li>
<p>An <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs_services.html">ECS Service</a> that will use the new Docker image uploaded for each service of the project, being these services the specified below:</p>
</li>
<li>
<p><a href="../bruin-bridge">bruin-bridge</a></p>
</li>
<li>
<p><a href="../cts-bridge">cts-bridge</a></p>
</li>
<li>
<p><a href="../customer-cache">customer-cache</a></p>
</li>
<li>
<p><a href="../dispatch-portal-backend">dispatch-portal-backend</a></p>
</li>
<li>
<p><a href="../dispatch-portal-frontend">dispatch-portal-frontend</a></p>
</li>
<li>
<p><a href="../last-contact-report">last-contact-report</a></p>
</li>
<li>
<p><a href="../lit-bridge">lit-bridge</a></p>
</li>
<li>
<p><a href="../lumin-billing-report">lumin-billing-report</a></p>
</li>
<li>
<p><a href="../metrics-dashboard/grafana">metrics-prometheus</a></p>
</li>
<li>
<p><a href="../nats-server">nats-server, nats-server-1, nats-server-2</a></p>
</li>
<li>
<p><a href="../email-bridge">email-bridge</a></p>
</li>
<li>
<p><a href="../notifications-bridge">notifications-bridge</a></p>
</li>
<li>
<p><a href="../service-affecting-monitor">service-affecting-monitor</a></p>
</li>
<li>
<p><a href="../service-dispatch-monitor">service-dispatch-monitor</a></p>
</li>
<li>
<p><a href="../service-outage-monitor">service-outage-monitor-1, service-outage-monitor-2, service-outage-monitor-3, service-outage-monitor-4, service-outage-monitor-triage</a></p>
</li>
<li>
<p><a href="../t7-bridge">t7-bridge</a></p>
</li>
<li>
<p><a href="../tnba-feedback">tnba-feedback</a></p>
</li>
<li>
<p><a href="../tnba-monitor">tnba-monitor</a></p>
</li>
<li>
<p><a href="../velocloud-bridge">velocloud-bridge</a></p>
</li>
<li>
<p>A <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/example_task_definitions.html">Task Definition</a> for each of the above <em>ECS Services</em></p>
</li>
</ul>
</li>
</ul>
<p>In this process, a series of resources will also be created in AWS for the selected environment, as follows:</p>
<ul>
<li>
<p>Three <a href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/WhatIs.html">ElastiCache Redis Clusters</a>, which are detailed below:</p>
<ul>
<li>
<p><code>&lt;environment&gt;</code>: used to save some data about dispatches, as well as to skip the limitation of messages of more than 1MB when passing them to NATS.</p>
</li>
<li>
<p><code>&lt;environment&gt;-customer-cache-redis</code>: used to save the mappings between Bruin clients and Velocloud edges, being able to use them between restarts if any occurs.</p>
</li>
<li>
<p><code>&lt;environment&gt;-tnba-feedback-cache-redis</code>: used to save ticket metrics sent to T7, so <code>tnba-feedback</code> can avoid sending them again afterwards.</p>
</li>
</ul>
</li>
<li>
<p>An <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html">ALB</a></p>
</li>
<li>
<p>A <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/rrsets-working-with.html">record</a> in <a href="https://aws.amazon.com/route53/features/">Route53</a></p>
</li>
<li>
<p>A <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CloudWatchLogsConcepts.html">CloudWatch Log Group</a></p>
</li>
<li>
<p>An <a href="https://aws.amazon.com/blogs/aws/amazon-ecs-service-discovery/">Service Discovery Service</a> for each ECS Service of the ECS Cluster created for this environment and a <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/service-discovery.html">Service Discovery Namespace</a> to logically group these <em>Service Discovery Services</em>.</p>
</li>
<li>
<p>A set of resources related to the metrics of the environment:</p>
<ul>
<li>
<p><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/AlarmThatSendsEmail.html">CloudWatch Alarms</a></p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Dashboards.html">CloudWatch Dashboard</a></p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html">CloudWatch Log Filters</a></p>
</li>
</ul>
</li>
<li>
<p>A <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacks.html">CloudFormation Stack</a> for create the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-sns-topic.html">SNS topic</a> that will be used by <em>CloudWatch Alarms</em> notifications of this environment</p>
</li>
<li>
<p>A <a href="https://docs.aws.amazon.com/AmazonS3/latest/gsg/GetStartedWithS3.html">S3 bucket</a> to store the content of the metrics obtained by <a href="https://thanos.io/">Thanos</a> and displayed through <a href="https://grafana.com/">Grafana</a>.</p>
</li>
</ul>
<p>Also, resources of type <a href="https://www.terraform.io/docs/providers/null/resource.html">null_resource</a> are created to execute some Python scripts:</p>
<ol>
<li>
<p>The creation of <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs_services.html">ECS Services</a> starts only if a Python script launched as a <code>null_resource</code> finishes with success. </p>
<p>This script checks that the last ECS service created for NATS is running in <code>HEALTHY</code> state.</p>
</li>
<li>
<p>If the previous step succeeded then ECS services related to capabilities microservices are created, with these being the following:</p>
<ul>
<li><code>bruin-bridge</code></li>
<li><code>cts-bridge</code></li>
<li><code>lit-bridge</code></li>
<li><code>email-bridge</code></li>
<li><code>notifications-bridge</code></li>
<li><code>prometheus</code></li>
<li><code>t7-bridge</code></li>
<li><code>velocloud-bridge</code> </li>
<li><code>hawkeye-bridge</code></li>
</ul>
<p>Once created, the script used for NATS is launched through <code>null_resource</code> to check that the task instances for each of these ECS services were created successfully and are in <code>RUNNING</code> and <code>HEALTHY</code> status.</p>
</li>
<li>
<p>Once all the scripts for the capabilities microservices have finished successfully, ECS services for the use-cases microservices are all created, with these being the following:</p>
<ul>
<li><code>customer-cache</code></li>
<li><code>dispatch-portal-backend</code></li>
<li><code>hawkeye-customer-cache</code></li>
<li><code>hawkeye-outage-monitor</code></li>
<li><code>last-contact-report</code></li>
<li><code>lumin-billing-report</code></li>
<li><code>service-affecting-monitor</code></li>
<li><code>service-dispatch-monitor</code></li>
<li><code>service-outage-monitor-1</code></li>
<li><code>service-outage-monitor-2</code></li>
<li><code>service-outage-monitor-3</code></li>
<li><code>service-outage-monitor-4</code></li>
<li><code>service-outage-monitor-triage</code></li>
<li><code>tnba-feedback</code></li>
<li><code>tnba-monitor</code></li>
</ul>
<p>This is achieved by defining explicit dependencies between the ECS services for the capabilities microservices and the set of null resources that perform the healthcheck of the capabilities microservices.​</p>
<p>The following is an example of a definition for the use-case microservice <code>service-affecting-monitor</code> using <a href="https://www.terraform.io/"><em>Terraform</em></a>. Here, the dependency between the corresponding <code>null_resource</code> type resources in charge of performing the health check of the different capabilities microservices in Terraform code for this microservice is established.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_ecs_service"</span><span class="w"> </span><span class="nv">"automation-service-affecting-monitor"</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">   </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">     </span><span class="na">depends_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nv">null_resource.bruin-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">                    </span><span class="nv">null_resource.cts-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">                    </span><span class="nv">null_resource.lit-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">                    </span><span class="nv">null_resource.velocloud-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">                    </span><span class="nv">null_resource.hawkeye-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">                    </span><span class="nv">null_resource.t7-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">                    </span><span class="nv">null_resource.email-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">                    </span><span class="nv">null_resource.notifications-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">                    </span><span class="nv">null_resource.metrics-prometheus-healthcheck</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
<a href="#__codelineno-1-14" id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">   </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
<a href="#__codelineno-1-15" id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>This procedure has been done to ensure that use case microservices are not created in ECS until new versions of the capability-type microservices are properly deployed, as use case microservices need to use capability-type microservices.</p>
</blockquote>
</li>
<li>
<p>Following the same procedure as in the previous step, a dependency is established between the microservice <code>dispatch-portal-frontend</code> and <code>dispatch-portal-backend</code>. </p>
<p>The reason for this is that the <code>dispatch-portal-frontend</code> microservice needs to know the corresponding IP with the DNS entry in Route53 for the <code>dispatch-portal-backend</code> microservice, since if the previous deployment is saved, the new IP corresponding to the DNS entry is not updated.</p>
<p>The following is the configuration in the terraform code of the service in ECS for the <code>dispatch-portal-frontend</code> microservice, where the necessary configuration to comply with this restriction can be seen.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_ecs_service"</span><span class="w"> </span><span class="nv">"automation-dispatch-portal-frontend"</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">   </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
<a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">     </span><span class="na">depends_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nv">null_resource.bruin-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">                    </span><span class="nv">null_resource.cts-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">                    </span><span class="nv">null_resource.lit-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">                    </span><span class="nv">null_resource.velocloud-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">                    </span><span class="nv">null_resource.hawkeye-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">                    </span><span class="nv">null_resource.t7-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">                    </span><span class="nv">null_resource.email-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">                    </span><span class="nv">null_resource.notifications-bridge-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">                    </span><span class="nv">null_resource.metrics-prometheus-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">                    </span><span class="nv">null_resource.dispatch-portal-backend-healthcheck</span><span class="p">,</span><span class="w"></span>
<a href="#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">                    </span><span class="nv">aws_lb.automation-alb</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
<a href="#__codelineno-2-16" id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
</li>
<li>
<p>The provisioning of the different groups and the searches included in each one of them is done through a <a href="../ci-utils/papertrail-provisioning">python utility</a>, this makes calls to the util <a href="https://github.com/xoanmm/go-papertrail-cli">go-papertrail-cli</a> who is in charge of the provisioning of the elements mentioned in <a href="https://papertrailapp.com/">Papertrail</a>.</p>
</li>
</ol>
<h3 id="destroy-steps">Destroy steps</h3>
<p>In this stage a series of manual jobs are available to destroy what was created in the previous stage, both for <a href="https://github.com/konstellation-io/kre">KRE</a> and for the microservices of the repository in AWS. These are detailed below:</p>
<ul>
<li>
<p><code>destroy-branches</code> for ephemeral environments or <code>destroy-master</code> for the production environment: This job will destroy everything created by Terraform in the previous stage by the job <code>deploy-branches</code> or <code>deploy-master</code> depending on the environment.</p>
</li>
<li>
<p><code>destroy-branches-aws-nuke</code>: This job is only available for ephemeral environments, it generates a <code>yml</code> file using a <a href="../ci-utils/aws-nuke/aws_nuke_conf_generator.py">specific script</a> to be used by <a href="https://github.com/rebuy-de/aws-nuke">aws-nuke</a> to destroy all the infrastructure created for an ephemeral environment in AWS. This job should only be used when the `destroy-branches' job fails.</p>
</li>
<li>
<p><code>destroy-basic-infra-kre-dev</code> for ephemeral environments or <code>destroy-basic-infra-kre-production</code> for the production environment: This job will destroy everything created by Terraform in the previous stage by the job <code>deploy-kre-dev</code> or <code>deploy-kre-production</code> depending on the environment.</p>
</li>
</ul>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Logging &amp; Monitoring" class="md-footer__link md-footer__link--prev" href="../LOGGING_AND_MONITORING/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Logging &amp; Monitoring
            </div>
</div>
</a>
<a aria-label="Next: Snowflake" class="md-footer__link md-footer__link--next" href="../snowflake/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Snowflake
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["header.autohide", "toc.follow", "toc.integrate"], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../assets/javascripts/bundle.748e2769.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>