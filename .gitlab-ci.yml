stages:
  - validation
  - unit_test
  - basic_infra
  - build
  - deploy
  - grafana_user_creation

variables:
  NATS_SERVER1: "nats://nats-server:4222"
  NATS_MODULE_VERSION: 2.1.0
  DOCKER_HOST: tcp://docker:2375/
  DOCKER_DRIVER: overlay2
  REPOSITORY_URL: 374050862540.dkr.ecr.us-east-1.amazonaws.com/automation

include:
  # Templates used in Gitlab-CI jobs
  - local: 'gitlab-ci/basic-templates/.gitlab-ci-build-image-templates.yml'
  - local: 'gitlab-ci/basic-templates/.gitlab-ci-unit_test-templates.yml'
  - local: 'gitlab-ci/basic-templates/.gitlab-ci-utils-templates.yml'
  - local: 'gitlab-ci/basic-templates/.gitlab-ci-validation-templates.yml'
  - local: 'gitlab-ci/terraform-templates/.gitlab-ci-terraform-basic-templates.yml'
  - local: 'gitlab-ci/terraform-templates/.gitlab-ci-terraform-deploy-templates.yml'
  - local: 'gitlab-ci/terraform-templates/.gitlab-ci-terraform-destroy-templates.yml'
  # Gitlab-CI jobs declaration for each microservice/module
  - local: 'bruin-bridge/.gitlab-ci.yml'
  - local: 'ci-utils/.gitlab-ci.yml'
  - local: 'custompackages/.gitlab-ci.yml'
  - local: 'infra-as-code/.gitlab-ci.yml'
  - local: 'last-contact-report/.gitlab-ci.yml'
  - local: 'metrics-dashboard/.gitlab-ci.yml'
  - local: 'nats-server/.gitlab-ci.yml'
  - local: 'notifier/.gitlab-ci.yml'
  - local: 'service-affecting-monitor/.gitlab-ci.yml'
  - local: 'service-outage-monitor/.gitlab-ci.yml'
  - local: 'service-outage-triage/.gitlab-ci.yml'
  - local: 't7-bridge/.gitlab-ci.yml'
  - local: 'velocloud-bridge/.gitlab-ci.yml'
  - local: 'velocloud-orchestrator/.gitlab-ci.yml'