# Automatically generated by HonestCode
# Do not edit this file as it will be overwritten

Feature: Workers consume

  Scenario: Mixed group and individual subscribers
    Given an event bus and the following consumers
      | consumer_name |
      | consumer_1    |
      | consumer_2    |
      | consumer_3    |
      | consumer_4    |
    When events are published to the topic "topic_mixed"
      | event   |
      | event 1 |
      | event 2 |
      | event 3 |
    And consumers are subscribed this way to the topic "topic_mixed"
      | consumer_name | subscription_type |
      | consumer_1    | individual        |
      | consumer_2    | individual        |
      | consumer_3    | group             |
      | consumer_4    | group             |
    Then each individual consumer will receive all events
    And group consumers will receive all events without repetitions
    And event bus connection is closed

  Scenario: Queue group subscribers
    Given an event bus and the following consumers
      | consumer_name |
      | consumer_1    |
      | consumer_2    |
      | consumer_3    |
    When events are published to the topic "topic_group"
      | event   |
      | event 1 |
      | event 2 |
      | event 3 |
    And consumers are subscribed as "group" to the topic "topic_group"
    Then group consumers will receive all events without repetitions
    And event bus connection is closed

  Scenario: Individual subscribers
    Given an event bus and the following consumers
      | consumer_name |
      | consumer_1    |
      | consumer_2    |
      | consumer_3    |
    When events are published to the topic "topic_individual"
      | event   |
      | event 1 |
      | event 2 |
      | event 3 |
    And consumers are subscribed as "individual" to the topic "topic_individual"
    Then each individual consumer will receive all events
    And event bus connection is closed
