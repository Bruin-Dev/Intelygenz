# ====================
# Docs deploy jobs
# ====================

docs-dev:
  stage: docs
  extends: .docs_template_deploy
  variables:
    DOCS_S3_BUCKET: s3://s3docs-website-dev/
    DOCS_BRANCH: s3docs-dev
    DOCS_DNS: docs-dev
    AUTOMATION_TAG: "1.16.0"
  rules:
    - if: $CI_COMMIT_BRANCH == "master"
      when: never
    - if: '$CI_COMMIT_BRANCH =~ /^dev\/(feature|fix)\/.+$/ && $CI_PIPELINE_SOURCE == "push" && $CI_COMMIT_TITLE =~ /(docs)\(.*\): .*$/'
    - if: '$CI_COMMIT_BRANCH =~ /^dev\/(feature|fix)\/.+$/ && $CI_PIPELINE_SOURCE == "web"'
      when: manual
      allow_failure: true


docs-pro:
  stage: docs
  extends: .docs_template_deploy
  variables:
    DOCS_S3_BUCKET: s3://s3docs-website/
    DOCS_BRANCH: s3docs
    DOCS_DNS: docs
    AUTOMATION_TAG: $CI_COMMIT_TAG
  rules:
    - if: '$CI_COMMIT_TAG =~ /^automation-engine@\d*.\d*.\d*$/'
